<!DOCTYPE html>
<html>
<head>
    <title>span align scooch</title>
    <meta charset="UTF-8" />

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script type='text/javascript' src='https://cdn.firebase.com/v0/firebase.js'></script>
    <script type="text/javascript">Twext = {};</script>

    <script src="js/classy.js" type="text/javascript"></script>
    <script src="js/jquery.hotkeys.js" type="text/javascript"></script>
    <script src="js/jquery.jsonp.js" type="text/javascript"></script>

    <script src="js/twext/string.js" type="text/javascript"></script>
    <script src="js/twext/output.js" type="text/javascript"></script>
    <script src="js/twext/utils.js" type="text/javascript"></script>

    <script src="js/twext/translate.js" type="text/javascript"></script>
    <script src="js/twext/toggle_data.js" type="text/javascript"></script>
    <script src="js/twext/languages.js" type="text/javascript"></script>

    <script src="scooch/js/scooch_area.js" type="text/javascript"></script>
    <script src="scooch/js/scooch_edit_line.js" type="text/javascript"></script>
    <script src="scooch/js/scooch_edit_lines.js" type="text/javascript"></script>
    <script src="scooch/js/scooch_area.js" type="text/javascript"></script>

    <script src="js/data/sample2.js" type="text/javascript"></script>
    <script src="js/toggle.data.js" type="text/javascript"></script>

    <!-- Span aligner package -->
    <script src="../spanAlign/js/utils.js" type="text/javascript"></script>
    <script src="../spanAlign/js/class.js" type="text/javascript"></script>
    <script src="../spanAlign/js/spanaligner.js" type="text/javascript"></script>

    <link rel="stylesheet" href="css/toggle.data.css">
    <link rel="stylesheet" href="css/twext.css">
</head>
<body>
<div id="main" style="display:none">
<!--<div id="data-bar"><div id="data-bar-language">Language</div><div id="data-bar-version">Version</div><div id="data-bar-error">Error</div> <div class="clear"></div></div>-->
<div id="control_data-bar"><div class="controls">F2</div><div class="data">&hearts;</div><div class="controls">F4</div><div id="data-bar-Twext" class="data">text</div><div class="controls">F8</div><div id="data-bar-language" class="data">language</div><div id="translating">translating...</div><div class="clear"></div></div>
<div id="language_menu_container"><select id="language_menu" name="language_menu" multiple>
</select></div>
<div id="data-show" contenteditable="true"></div>
<div id="url-list-controls"><div class="controls">F9</div><div id="url-list-label" class="data">off</div></div>
<div id="url-sub-list"></div><div id="url-all-list"></div>
<!--<div id="instructions">F2: translate. &nbsp; F8/Alt+F8: Change Language. &nbsp;F7/Alt+F7: Change Version. &nbsp;F9/Alt+F9: Toggle Language/Version</div>-->
</div>

<script>
  Area_Limit = 140; // The maximum number of characters allowed to be entered in the area
  // Attach 'paste' event to document, reformat pasted text.
  document.querySelector("div[contenteditable]").addEventListener("paste", function (e) {
    e.preventDefault();
    var text = e.clipboardData.getData("text/plain"); // get text to paste
    var html = textToHtml(text);
    document.execCommand("insertHTML", false, html);  // append pasted text to element
    text = $('#data-show')[0].innerText;  // text after paste
    if($('.twext').length == 0 && text.length > Area_Limit) $('#data-show').html(textToHtml(text.substring(0, Area_Limit))); // drop off characters more than the limit
  });
</script>
</body>
</html>
