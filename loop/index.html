<!DOCTYPE html>
<html>
<head>
    <title>span align scooch</title>
    <meta charset="UTF-8" />

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script type='text/javascript' src='https://cdn.firebase.com/v0/firebase.js'></script>
    <script type="text/javascript">Twext = {};</script>

    <script src="js/classy.js" type="text/javascript"></script>
    <script src="js/jquery.hotkeys.js" type="text/javascript"></script>
    <script src="js/jquery.jsonp.js" type="text/javascript"></script>

    <script src="js/twext/string.js" type="text/javascript"></script>
    <script src="js/twext/output.js" type="text/javascript"></script>
    <script src="js/twext/utils.js" type="text/javascript"></script>

    <script src="js/sybTiming/syb-timing.js" type="text/javascript"></script>

    <script src="http://xc.cx/syb/Hyphenator.js" type="text/javascript"></script>
    <script src="http://xc.cx/syb/en-us.js" type="text/javascript"></script>

    <script src="js/twext/translate.js" type="text/javascript"></script>
    <script src="js/twext/toggle_data.js" type="text/javascript"></script>
    <script src="js/twext/languages.js" type="text/javascript"></script>

    <script src="scooch/js/scooch_area.js" type="text/javascript"></script>
    <script src="scooch/js/scooch_edit_line.js" type="text/javascript"></script>
    <script src="scooch/js/scooch_edit_lines.js" type="text/javascript"></script>
    <script src="scooch/js/scooch_area.js" type="text/javascript"></script>

    <!--<script src="js/data/sample2.js" type="text/javascript"></script>
    <script src="js/toggle.data.js" type="text/javascript"></script>-->

    <!-- Player -->
    <script src="../play/text-player.js" type="text/javascript"></script>
    <script src="../play/classy.js" type="text/javascript"></script>
    <script src="../play/utils.js" type="text/javascript"></script>
    <link rel="stylesheet" href="../play/css/textPlayer.css">

    <!-- Language Menu -->
    <script src="js/language-menu.js" type="text/javascript"></script>
    <!-- Toggle features -->
    <script src="js/toggle.js" type="text/javascript"></script>
    <!-- URL list features -->
    <script src="js/url-list.js" type="text/javascript"></script>

    <!-- Span aligner package -->
    <script src="../spanAlign/js/utils.js" type="text/javascript"></script>
    <script src="../spanAlign/js/class.js" type="text/javascript"></script>
    <script src="../spanAlign/js/spanaligner.js" type="text/javascript"></script>

    <!-- The main file that handles all intializations -->
    <script src="js/main.js" type="text/javascript"></script>

    <!-- Recorder -->
    <script src="../recorder/classy.js" type="text/javascript"></script>
    <script src="../recorder/twext-recorder.js" type="text/javascript"></script>
    <script src="../recorder/lib/recorder.js" type="text/javascript"></script>
    <script src="../recorder/lib/recorderWorker.js" type="text/javascript"></script>

    <link rel="stylesheet" href="css/toggle_data.css">
    <link rel="stylesheet" href="css/twxt.css">
</head>
<body>
<audio style="display:none"></audio>
<div id="main" style="display:none">
<!--<div id="data-bar"><div id="data-bar-language">Language</div><div id="data-bar-version">Version</div><div id="data-bar-error">Error</div> <div class="clear"></div></div>-->
<div id="control-data-bar"><a id="data-bar-f7" class="controls">F7</a><a id="data-bar-heart" class="data">&hearts;</a><a id="data-bar-f2" class="controls">F2</a><a id="data-bar-play" class="data">play</a><a id="data-bar-f4" class="controls">F4</a><a id="data-bar-timing" class="data">text</a><a id="data-bar-f8" class="controls">F8</a><a id="data-bar-language" class="data">language</a><div id="translating">translating...</div><div class="clear"></div></div>
<div id="language_menu_container"><select id="language_menu" name="language_menu" multiple>
</select></div>
<div id="data-show" contenteditable="true"></div>
<div id="url-list-controls"><a id="url-list-f9" class="controls">F9</a><a id="url-list-label" class="data">off</a></div>
<div id="url-sub-list"></div><div id="url-all-list"></div>
<!--<div id="instructions">F2: translate. &nbsp; F8/Alt+F8: Change Language. &nbsp;F7/Alt+F7: Change Version. &nbsp;F9/Alt+F9: Toggle Language/Version</div>-->
</div>

<script>
  Area_Limit = 320; // The maximum number of characters allowed to be entered in the area
  // Attach 'paste' event to document, reformat pasted text.
  document.querySelector("div[contenteditable]").addEventListener("paste", function (e) {
    e.preventDefault();
    var text = e.clipboardData.getData("text/plain"); // get text to paste
    var html = textToHtml(text);
    document.execCommand("insertHTML", false, html);  // append pasted text to element
    text = $('#data-show')[0].innerText;  // text after paste
    if($('.twext').length == 0 && text.length > Area_Limit) $('#data-show').html(textToHtml(text.substring(0, Area_Limit))); // drop off characters more than the limit
  });
</script>
</body>
</html>
